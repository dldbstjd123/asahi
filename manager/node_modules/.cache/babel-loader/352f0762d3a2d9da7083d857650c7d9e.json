{"ast":null,"code":"var _jsxFileName = \"/Users/yoonjung/Desktop/UH/asahi/manager/src/route/Category.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { domain } from \"../config\";\n\nconst Category = () => {\n  const [list, setList] = useState([]);\n  const [addData, setAddData] = useState();\n  const [optionTo20, setOptionTo20] = useState();\n  let count = 0;\n\n  function onChangeHandler(event) {\n    let indexOfEvent = event.target.getAttribute(\"akey\");\n    console.log(`indexOfEvent = ${indexOfEvent}`);\n    let currentObject = list[indexOfEvent];\n    console.log(`currentObject = ${currentObject}`);\n    let chosenName = event.target.name;\n    currentObject[chosenName] = event.target.value; //console.log(currentObject)\n\n    setList(array => {\n      console.log(\"1\", array);\n      array.splice(indexOfEvent, 1, currentObject);\n      return [...array];\n    });\n  }\n\n  function changeAddData(event) {\n    console.log(event.target.name);\n    console.log(event.target.value);\n  }\n\n  async function updateHandler(event) {\n    let targetOfList = event.target.getAttribute(\"akey\");\n    console.log(list[targetOfList]);\n    const doWork = await fetch(`${domain}admin/category/update`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(list[targetOfList])\n    });\n    window.location.reload();\n  }\n\n  async function deleteHandler(event) {\n    let targetOfList = event.target.getAttribute(\"akey\");\n    console.log(list[targetOfList]);\n    const doWork = await fetch(`${domain}admin/category/delete`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(list[targetOfList])\n    });\n    window.location.reload();\n  }\n\n  async function addHandler(event) {\n    event.preventDefault();\n    const doWork = await fetch(`${domain}admin/category/add`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name: event.target.name.value,\n        sort: event.target.sort.value\n      })\n    });\n    window.location.reload();\n    console.log(event.target.name.value);\n  }\n\n  function makeOptions(n) {\n    let option;\n\n    for (let i = 1; i < n; i++) {\n      if (option == undefined) {\n        option = /*#__PURE__*/React.createElement(\"option\", {\n          value: \"${i}\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 22\n          }\n        }, \"$\", i);\n      } else {\n        option += /*#__PURE__*/React.createElement(\"option\", {\n          value: \"${i}\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 23\n          }\n        }, \"$\", i);\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, option);\n  }\n\n  useEffect(() => {\n    console.log(makeOptions(21));\n    setOptionTo20(makeOptions(21));\n    console.log('=====');\n    console.log(optionTo20);\n    fetch(`${domain}admin/category/get`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(data => {\n      setList(data);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontSize: \"20px\",\n      textAlign: \"left\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, \"Category Page\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, \"No.\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, \"Sort\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  })), list.map(item => {\n    count++;\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, item.id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      akey: count - 1,\n      name: \"name\",\n      value: item.name,\n      required: true,\n      onChange: onChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      akey: count - 1,\n      name: \"sort\",\n      value: item.sort,\n      required: true,\n      onChange: onChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      akey: count - 1,\n      value: \"Update\",\n      onClick: updateHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      akey: count - 1,\n      value: \"Delete\",\n      onClick: deleteHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 23\n      }\n    })));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontSize: \"20px\",\n      textAlign: \"left\",\n      marginTop: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, \"Add\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: addHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, \"Sort\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    onChange: changeAddData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    name: \"sort\",\n    onChange: changeAddData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, optionTo20)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 19\n    }\n  }, \"Submit\"))))))));\n};\n\nexport default Category;","map":{"version":3,"sources":["/Users/yoonjung/Desktop/UH/asahi/manager/src/route/Category.js"],"names":["React","useState","useEffect","domain","Category","list","setList","addData","setAddData","optionTo20","setOptionTo20","count","onChangeHandler","event","indexOfEvent","target","getAttribute","console","log","currentObject","chosenName","name","value","array","splice","changeAddData","updateHandler","targetOfList","doWork","fetch","method","mode","cache","credentials","headers","body","JSON","stringify","window","location","reload","deleteHandler","addHandler","preventDefault","sort","makeOptions","n","option","i","undefined","then","res","json","data","fontSize","textAlign","width","map","item","id","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { domain } from \"../config\";\n\nconst Category = () => {\n  const [list, setList] = useState([]);\n  const [addData, setAddData] = useState();\n  const[optionTo20, setOptionTo20] = useState();\n  let count = 0;\n\n  function onChangeHandler(event) {\n    let indexOfEvent = event.target.getAttribute(\"akey\");\n    console.log(`indexOfEvent = ${indexOfEvent}`);\n    let currentObject = list[indexOfEvent];\n    console.log(`currentObject = ${currentObject}`);\n    let chosenName = event.target.name;\n    currentObject[chosenName] = event.target.value;\n    //console.log(currentObject)\n    setList((array) => {\n      console.log(\"1\", array);\n      array.splice(indexOfEvent, 1, currentObject);\n      return [...array];\n    });\n  }\n  function changeAddData(event) {\n    console.log(event.target.name);\n    console.log(event.target.value);\n  }\n\n  async function updateHandler(event) {\n    let targetOfList = event.target.getAttribute(\"akey\");\n    console.log(list[targetOfList]);\n\n    const doWork = await fetch(`${domain}admin/category/update`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(list[targetOfList]),\n    });\n    window.location.reload();\n  }\n\n  async function deleteHandler(event) {\n    let targetOfList = event.target.getAttribute(\"akey\");\n    console.log(list[targetOfList]);\n\n    const doWork = await fetch(`${domain}admin/category/delete`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(list[targetOfList]),\n    });\n    window.location.reload();\n  }\n  async function addHandler(event) {\n    event.preventDefault();\n\n    const doWork = await fetch(`${domain}admin/category/add`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name: event.target.name.value,\n        sort: event.target.sort.value,\n      }),\n    });\n    window.location.reload();\n    console.log(event.target.name.value);\n  }\n  function makeOptions(n){\n    let option\n    for(let i=1; i<n; i++){\n        if(option == undefined){\n            option = <option value=\"${i}\">${i}</option>\n        }else{\n            option += <option value=\"${i}\">${i}</option>\n        }\n    }\n    return <>{option}</>\n  }\n\n  useEffect(() => {\n    \n    console.log(makeOptions(21))\n        setOptionTo20(makeOptions(21))\n    console.log('=====')\n    console.log(optionTo20)\n    fetch(`${domain}admin/category/get`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setList(data);\n      });\n  }, []);\n  return (\n    <div>\n      <div style={{ fontSize: \"20px\", textAlign: \"left\" }}>Category Page</div>\n      <div>\n        <form>\n          <table style={{ width: \"100%\" }}>\n            <tbody>\n              <tr>\n                <th>No.</th>\n                <th>Name</th>\n                <th>Sort</th>\n                <th></th>\n                <th></th>\n              </tr>\n              {list.map((item) => {\n                count++;\n                return (\n                  <tr key={item.id}>\n                    <td>{item.id}</td>\n                    <td>\n                      <input\n                        type=\"text\"\n                        akey={count - 1}\n                        name=\"name\"\n                        value={item.name}\n                        required\n                        onChange={onChangeHandler}\n                      />\n                    </td>\n                    <td>\n                      <input\n                        type=\"text\"\n                        akey={count - 1}\n                        name=\"sort\"\n                        value={item.sort}\n                        required\n                        onChange={onChangeHandler}\n                      />\n                    </td>\n                    <td>\n                      <input\n                        type=\"button\"\n                        akey={count - 1}\n                        value=\"Update\"\n                        onClick={updateHandler}\n                      />\n                    </td>\n                    <td>\n                      <input\n                        type=\"button\"\n                        akey={count - 1}\n                        value=\"Delete\"\n                        onClick={deleteHandler}\n                      />\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </form>\n        <div style={{ fontSize: \"20px\", textAlign: \"left\", marginTop: \"20px\" }}>\n          Add\n        </div>\n        <form onSubmit={addHandler}>\n          <table>\n            <tbody>\n              <tr>\n                <th>Name</th>\n                <th>Sort</th>\n                <th></th>\n              </tr>\n              <tr>\n                <td>\n                  <input type=\"text\" name=\"name\" onChange={changeAddData} />\n                </td>\n                <td>\n                  <select name=\"sort\" onChange={changeAddData}>\n                    {optionTo20}\n                  </select>\n                </td>\n                <td>\n                  <button type=\"submit\">Submit</button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Category;\n"]},"metadata":{},"sourceType":"module"}