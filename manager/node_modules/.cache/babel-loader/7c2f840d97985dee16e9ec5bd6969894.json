{"ast":null,"code":"import _toConsumableArray from\"/Users/yoonjung/Desktop/UH/asahi/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/yoonjung/Desktop/UH/asahi/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useLocation}from\"react-router-dom\";import{domain}from\"../config\";var MenuUpdate=function MenuUpdate(props){var query=new URLSearchParams(useLocation().search);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categoryOptions=_useState4[0],setCategoryOptions=_useState4[1];var count=0;function handleChange(event){var indexOfEvent=event.target.getAttribute(\"akey\");console.log(\"indexOfEvent = \".concat(indexOfEvent));var currentObject=list[indexOfEvent];console.log(\"currentObject = \".concat(currentObject));var chosenName=event.target.name;currentObject[chosenName]=event.target.value;//console.log(currentObject)\nsetList(function(array){console.log(\"1\",array);array.splice(indexOfEvent,1,currentObject);return _toConsumableArray(array);});//console.log(list)\n}useEffect(function(){fetch(\"\".concat(domain,\"admin/menu_update/get?item=\").concat(query.get(\"item\")),{method:\"POST\",mode:\"cors\",cache:\"no-cache\",credentials:\"same-origin\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){console.log(data);setList(data);});},[]);useEffect(function(){fetch(\"\".concat(domain,\"admin/category/get\"),{method:\"POST\",mode:\"cors\",cache:\"no-cache\",credentials:\"same-origin\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){console.log(\"categoryOptions = \".concat(categoryOptions));setCategoryOptions(data);console.log(\"categoryOptions = \".concat(categoryOptions));});},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Menu Update Page\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"table\",{style:{width:\"100%\"}},list.map(function(item){var activeSelect=\"\";if(item.active){activeSelect=/*#__PURE__*/React.createElement(\"select\",{akey:item.id,name:\"active\",onChange:handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"true\"},\"yes\"),/*#__PURE__*/React.createElement(\"option\",{value:\"false\"},\"No\"));}else{activeSelect=/*#__PURE__*/React.createElement(\"select\",{akey:item.id,name:\"active\",onChange:handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"true\"},\"yes\"),/*#__PURE__*/React.createElement(\"option\",{selected:true,value:\"false\"},\"No\"));}return/*#__PURE__*/React.createElement(\"tbody\",{key:item.id},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"NAME\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{akey:item.id,type:\"text\",name:\"name\",required:true,value:item.name,onChange:handleChange})),/*#__PURE__*/React.createElement(\"th\",null,\"PRICE\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{akey:item.id,type:\"text\",name:\"price\",required:true,value:item.price,onChange:handleChange}))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"DESCRIPTION\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{akey:item.id,type:\"text\",name:\"description\",required:true,value:item.description,onChange:handleChange})),/*#__PURE__*/React.createElement(\"th\",null,\"CATEGORY\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"select\",{akey:item.id,name:\"category\",onChange:handleChange,value:item.category},categoryOptions.map(function(array){return/*#__PURE__*/React.createElement(\"option\",{key:array.id,value:array.id},array.name);})))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"SORT\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{akey:item.id,type:\"text\",name:\"sort\",required:true,value:item.sort,onChange:handleChange})),/*#__PURE__*/React.createElement(\"th\",null,\"ACTIVE\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"select\",{akey:item.id,name:\"active\",onChange:handleChange,value:item.active},/*#__PURE__*/React.createElement(\"option\",{value:\"true\"},\"yes\"),/*#__PURE__*/React.createElement(\"option\",{value:\"false\"},\"No\")))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"IMAGE CONTINER\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{akey:item.id,type:\"file\",name:\"image\",onChange:function onChange(event){console.log(event.target.files[0].name);}}))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Update\"),/*#__PURE__*/React.createElement(\"td\",null,\"Delete\")));})))));};export default MenuUpdate;","map":{"version":3,"sources":["/Users/yoonjung/Desktop/UH/asahi/manager/src/route/MenuUpdate.js"],"names":["React","useState","useEffect","useLocation","domain","MenuUpdate","props","query","URLSearchParams","search","list","setList","categoryOptions","setCategoryOptions","count","handleChange","event","indexOfEvent","target","getAttribute","console","log","currentObject","chosenName","name","value","array","splice","fetch","get","method","mode","cache","credentials","headers","then","res","json","data","width","map","item","activeSelect","active","id","price","description","category","sort","files"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { domain } from \"../config\";\n\nconst MenuUpdate = (props) => {\n  let query = new URLSearchParams(useLocation().search)\n  const [list, setList] = useState([]);\n  const [categoryOptions, setCategoryOptions] = useState([]);\n  let count = 0;\n  function handleChange(event) {\n    let indexOfEvent = event.target.getAttribute(\"akey\");\n    console.log(`indexOfEvent = ${indexOfEvent}`);\n    let currentObject = list[indexOfEvent];\n    console.log(`currentObject = ${currentObject}`);\n    let chosenName = event.target.name;\n    currentObject[chosenName] = event.target.value;\n    //console.log(currentObject)\n    setList((array) => {\n      console.log(\"1\", array);\n      array.splice(indexOfEvent, 1, currentObject);\n      return [...array];\n    });\n    //console.log(list)\n  }\n  useEffect(() => {\n    fetch(`${domain}admin/menu_update/get?item=${query.get(\"item\")}`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        setList(data);\n      });\n  }, []);\n\n  useEffect(() => {\n    fetch(`${domain}admin/category/get`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(`categoryOptions = ${categoryOptions}`);\n        setCategoryOptions(data);\n        console.log(`categoryOptions = ${categoryOptions}`);\n      });\n  }, []);\n  return (\n    <div>\n      <div>Menu Update Page</div>\n      <div>\n        <form>\n          <table style={{ width: \"100%\" }}>\n              {list.map((item) => {\n                let activeSelect = \"\";\n                if (item.active) {\n                  activeSelect = (\n                    <select\n                      akey={item.id}\n                      name=\"active\"\n                      onChange={handleChange}\n                    >\n                      <option value=\"true\">yes</option>\n                      <option value=\"false\">No</option>\n                    </select>\n                  );\n                } else {\n                  activeSelect = (\n                    <select\n                      akey={item.id}\n                      name=\"active\"\n                      onChange={handleChange}\n                    >\n                      <option value=\"true\">yes</option>\n                      <option selected value=\"false\">\n                        No\n                      </option>\n                    </select>\n                  );\n                }\n                return (\n\t\t  <tbody key={item.id}>\n                  <tr>\n\t\t    <th>NAME</th>\n                    <td>\n\t\t      <input\n                        akey={item.id}\n                        type=\"text\"\n                        name=\"name\"\n                        required\n                        value={item.name}\n                        onChange={handleChange}\n                      />\n    \t\t    </td>\n\t\t    <th>PRICE</th>\n\t\t    <td>\n\t\t      <input\n                        akey={item.id}\n                        type=\"text\"\n                        name=\"price\"\n                        required\n                        value={item.price}\n                        onChange={handleChange}\n                      />\n\t\t    </td>\n\t\t  </tr>\n\t\t  <tr>\n\t\t    <th>DESCRIPTION</th>\n\t\t    <td>\n                      <input\n                        akey={item.id}\n                        type=\"text\"\n                        name=\"description\"\n                        required\n                        value={item.description}\n                        onChange={handleChange}\n                      />\n                    </td>\n\t\t    <th>CATEGORY</th>\n\t\t    <td>\n                      <select\n                        akey={item.id}\n                        name=\"category\"\n                        onChange={handleChange}\n                        value={item.category}\n                      >\n                        {categoryOptions.map((array) => {\n                          return (\n                            <option key={array.id} value={array.id}>\n                              {array.name}\n                            </option>\n                          );\n                        })}\n                      </select>\n                    </td>\n\t\t  </tr>\t\n\t\t  <tr>\n\t\t    <th>SORT</th>\n                    <td>\n                      <input\n                        akey={item.id}\n                        type=\"text\"\n                        name=\"sort\"\n                        required\n                        value={item.sort}\n                        onChange={handleChange}\n                      />\n                    </td>\n\t\t    <th>ACTIVE</th>\n                    <td>\n                      <select\n                        akey={item.id}\n                        name=\"active\"\n                        onChange={handleChange}\n                        value={item.active}\n                      >\n                        <option value=\"true\">yes</option>\n                        <option value=\"false\">No</option>\n                      </select>\n                    </td>\n\t\t  </tr>\n\t\t  <tr>\n\t\t    <td>IMAGE CONTINER</td>\n\t\t    <td>\n                      <input\n                        akey={item.id}\n                        type=\"file\"\n                        name=\"image\"\n                        onChange={(event) => {\n                          console.log(event.target.files[0].name);\n                        }}\n                      />\n                    </td>\n\t\t  </tr>\n\t\t  <tr>\n                    <td>Update</td>\n                    <td>Delete</td>\n                  </tr>\n\t\t  </tbody>\n                );\n              })}\n          </table>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default MenuUpdate;\n"]},"metadata":{},"sourceType":"module"}