{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yoonjung/Desktop/UH/asahi/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yoonjung/Desktop/UH/asahi/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/yoonjung/Desktop/UH/asahi/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/yoonjung/Desktop/UH/asahi/manager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{domain}from\"../config\";var Hours=function Hours(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),schedule=_useState2[0],setSchedule=_useState2[1];var count=0;useEffect(function(){fetch(\"\".concat(domain,\"admin/hours/get\"),{method:\"POST\",mode:\"cors\",cache:\"no-cache\",credentials:\"same-origin\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){console.log(data);setSchedule(data);});console.log(schedule);},[]);function onChangeHandler(event){var theIndex=event.target.getAttribute(\"akey\");var selectedIndex=schedule[theIndex];selectedIndex[event.target.name]=event.target.value;setSchedule(function(array){console.log(\"1\",array);array.splice(theIndex,1,selectedIndex);return _toConsumableArray(array);});}function updateHandler(){return _updateHandler.apply(this,arguments);}function _updateHandler(){_updateHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var doWork;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(domain,\"admin/hours/update\"),{method:\"POST\",mode:\"cors\",cache:\"no-cache\",credentials:\"same-origin\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(schedule)});case 2:doWork=_context.sent;window.location.reload();case 4:case\"end\":return _context.stop();}}},_callee);}));return _updateHandler.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Category Page\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"table\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Open time\"),/*#__PURE__*/React.createElement(\"th\",null,\"Close time\")),schedule.map(function(item){count++;return/*#__PURE__*/React.createElement(\"tr\",{key:item.id},/*#__PURE__*/React.createElement(\"td\",null,item.date),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{akey:count-1,type:\"text\",name:\"open\",value:item.openhour,onChange:onChangeHandler})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{akey:count-1,type:\"text\",name:\"close\",value:item.closehour,onChange:onChangeHandler})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"select\",{akey:count-1,name:\"status\",value:item.status,onChange:onChangeHandler},/*#__PURE__*/React.createElement(\"option\",{value:1},\"Open\"),/*#__PURE__*/React.createElement(\"option\",{value:0},\"Closed\"))));}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"button\",value:\"UPDATE\",onClick:updateHandler})))));};export default Hours;","map":{"version":3,"sources":["/Users/yoonjung/Desktop/UH/asahi/manager/src/route/Hours.js"],"names":["React","useState","useEffect","domain","Hours","schedule","setSchedule","count","fetch","method","mode","cache","credentials","headers","then","res","json","data","console","log","onChangeHandler","event","theIndex","target","getAttribute","selectedIndex","name","value","array","splice","updateHandler","body","JSON","stringify","doWork","window","location","reload","width","map","item","id","date","openhour","closehour","status"],"mappings":"ioBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,MAAT,KAAuB,WAAvB,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,eACcH,QAAQ,CAAC,EAAD,CADtB,wCACXI,QADW,eACDC,WADC,eAElB,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CAEAL,SAAS,CAAC,UAAM,CACdM,KAAK,WAAIL,MAAJ,oBAA6B,CAChCM,MAAM,CAAE,MADwB,CAEhCC,IAAI,CAAE,MAF0B,CAGhCC,KAAK,CAAE,UAHyB,CAIhCC,WAAW,CAAE,aAJmB,CAKhCC,OAAO,CAAE,CACP,eAAgB,kBADT,CALuB,CAA7B,CAAL,CASGC,IATH,CASQ,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EATR,EAUGF,IAVH,CAUQ,SAACG,IAAD,CAAU,CACdC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAX,WAAW,CAACW,IAAD,CAAX,CACD,CAbH,EAeAC,OAAO,CAACC,GAAR,CAAYd,QAAZ,EACD,CAjBQ,CAiBN,EAjBM,CAAT,CAmBA,QAASe,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAC9B,GAAIC,CAAAA,QAAQ,CAAGD,KAAK,CAACE,MAAN,CAAaC,YAAb,CAA0B,MAA1B,CAAf,CACA,GAAIC,CAAAA,aAAa,CAAGpB,QAAQ,CAACiB,QAAD,CAA5B,CACAG,aAAa,CAACJ,KAAK,CAACE,MAAN,CAAaG,IAAd,CAAb,CAAmCL,KAAK,CAACE,MAAN,CAAaI,KAAhD,CACArB,WAAW,CAAC,SAACsB,KAAD,CAAW,CACrBV,OAAO,CAACC,GAAR,CAAY,GAAZ,CAAiBS,KAAjB,EACAA,KAAK,CAACC,MAAN,CAAaP,QAAb,CAAuB,CAAvB,CAA0BG,aAA1B,EACA,0BAAWG,KAAX,EACD,CAJU,CAAX,CAKD,CAhCiB,QAkCHE,CAAAA,aAlCG,iJAkClB,oKACuBtB,CAAAA,KAAK,WAAIL,MAAJ,uBAAgC,CACxDM,MAAM,CAAE,MADgD,CAExDC,IAAI,CAAE,MAFkD,CAGxDC,KAAK,CAAE,UAHiD,CAIxDC,WAAW,CAAE,aAJ2C,CAKxDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAL+C,CAQxDkB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe5B,QAAf,CARkD,CAAhC,CAD5B,QACQ6B,MADR,eAWEC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAXF,sDAlCkB,gDA+ClB,mBACE,4CACE,+CADF,cAEE,4CACE,6CACE,6BAAO,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAT,CAAd,eACE,8CACE,2CACE,8BADF,cAEE,0CAFF,cAGE,2CAHF,CADF,CAMGjC,QAAQ,CAACkC,GAAT,CAAa,SAACC,IAAD,CAAU,CACtBjC,KAAK,GACL,mBACE,0BAAI,GAAG,CAAEiC,IAAI,CAACC,EAAd,eACE,8BAAKD,IAAI,CAACE,IAAV,CADF,cAEE,2CACE,6BACE,IAAI,CAAEnC,KAAK,CAAG,CADhB,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,MAHP,CAIE,KAAK,CAAEiC,IAAI,CAACG,QAJd,CAKE,QAAQ,CAAEvB,eALZ,EADF,CAFF,cAWE,2CACE,6BACE,IAAI,CAAEb,KAAK,CAAG,CADhB,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAEiC,IAAI,CAACI,SAJd,CAKE,QAAQ,CAAExB,eALZ,EADF,CAXF,cAoBE,2CACE,8BACE,IAAI,CAAEb,KAAK,CAAG,CADhB,CAEE,IAAI,CAAC,QAFP,CAGE,KAAK,CAAEiC,IAAI,CAACK,MAHd,CAIE,QAAQ,CAAEzB,eAJZ,eAME,8BAAQ,KAAK,CAAE,CAAf,SANF,cAOE,8BAAQ,KAAK,CAAE,CAAf,WAPF,CADF,CApBF,CADF,CAkCD,CApCA,CANH,CADF,CADF,cA+CE,4CACE,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,CAAoC,OAAO,CAAEU,aAA7C,EADF,CA/CF,CADF,CAFF,CADF,CA0DD,CAzGD,CA2GA,cAAe1B,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { domain } from \"../config\";\n\nconst Hours = () => {\n  const [schedule, setSchedule] = useState([]);\n  let count = 0;\n\n  useEffect(() => {\n    fetch(`${domain}admin/hours/get`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        setSchedule(data);\n      });\n\n    console.log(schedule);\n  }, []);\n\n  function onChangeHandler(event) {\n    let theIndex = event.target.getAttribute(\"akey\");\n    let selectedIndex = schedule[theIndex];\n    selectedIndex[event.target.name] = event.target.value;\n    setSchedule((array) => {\n      console.log(\"1\", array);\n      array.splice(theIndex, 1, selectedIndex);\n      return [...array];\n    });\n  }\n\n  async function updateHandler() {\n    const doWork = await fetch(`${domain}admin/hours/update`, {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(schedule),\n    });\n    window.location.reload();\n  }\n  return (\n    <div>\n      <div>Category Page</div>\n      <div>\n        <form>\n          <table style={{ width: \"100%\" }}>\n            <tbody>\n              <tr>\n                <th></th>\n                <th>Open time</th>\n                <th>Close time</th>\n              </tr>\n              {schedule.map((item) => {\n                count++;\n                return (\n                  <tr key={item.id}>\n                    <td>{item.date}</td>\n                    <td>\n                      <input\n                        akey={count - 1}\n                        type=\"text\"\n                        name=\"open\"\n                        value={item.openhour}\n                        onChange={onChangeHandler}\n                      />\n                    </td>\n                    <td>\n                      <input\n                        akey={count - 1}\n                        type=\"text\"\n                        name=\"close\"\n                        value={item.closehour}\n                        onChange={onChangeHandler}\n                      />\n                    </td>\n                    <td>\n                      <select\n                        akey={count - 1}\n                        name=\"status\"\n                        value={item.status}\n                        onChange={onChangeHandler}\n                      >\n                        <option value={1}>Open</option>\n                        <option value={0}>Closed</option>\n                      </select>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n          <div>\n            <input type=\"button\" value=\"UPDATE\" onClick={updateHandler} />\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Hours;\n"]},"metadata":{},"sourceType":"module"}